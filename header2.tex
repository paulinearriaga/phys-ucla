% standard packages
\usepackage{graphicx} % support the \includegraphics command and options
\usepackage{amsmath} % for nice math commands and environments
\usepackage{mathtools} % extends amsmath with bug fixes and useful commands e.g. \shortintertext
\usepackage{amsthm} % for theorem and proof environments

% font packages
\usepackage{amssymb} % for \mathbb, \mathfrak fonts
\usepackage{mathrsfs} % for \mathscr font
\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it} % defines \mathpzc for Zapf Chancery (standard postscript) font

% other packages
\usepackage{datetime} % allows easy formatting of dates, e.g. \formatdate{dd}{mm}{yyyy}
\usepackage{caption} % makes figure captions better, more configurable
\usepackage{enumitem} % allows for custom labels on enumerated lists, e.g. \begin{enumerate}[label=\textbf{(\alph*)}]
\usepackage[squaren]{SIunits} % for nice units formatting e.g. \unit{50}{\kilo\gram}
\usepackage{cancel} % for crossing out terms with \cancel
\usepackage{verbatim} % for verbatim and comment environments
\usepackage{tensor} % for \indices e.g. M\indices{^a_b^{cd}_e}, and \tensor e.g. \tensor[^a_b^c_d]{M}{^a_b^c_d}
\usepackage{feynmp-auto} % for Feynman diagrams. 
\usepackage{pgfplots} % for plotting in tikzpicture environment
\usepackage{commath} % for some nice standardized syntax stuff. \dif, \Dif \od, \pd, \md, \(abs | envert), \(norm | enVert), \(set | cbr), \sbr, \eval, \int(o | c)(o | c), etc
\usepackage{slashed} % provides a command \slashed[1] for Feynman slash notation
%\newcommand{\fslash}[1]{#1\!\!\!/} % feynman slash
%\newcommand{\fsl}[1]{\ensuremath{\mathrlap{\!\not{\phantom{#1}}}#1}}% \fsl{<symbol>}
	% alternative feynman slash

% new commands
\newcommand{\beg}{\begin} % a few letters less for beginning environments
\newenvironment{eqn}{\begin{equation}}{\end{equation}} % a lot fewer letter for equation environment

% rotate stuff
\usepackage{rotating}
	% provides environments for rotating arbitrary objects, e.g. sideways, turn[ang], rotate[ang]
	% also provides macro \turnbox{ang}{stuff}
%\newcommand{\sideways}[1]{\begin{sideways} #1 \end{sideways}} % turn things 90 degrees CCW
%\newcommand{\turn}[2][]{\begin{turn}{#2} #1 \end{turn}} % \turn[ang]{stuff} turns things arbitrary +/- angle

% notational commands
\newcommand{\opname}[1]{\operatorname{#1}} % custom operator names
%\newcommand{\pd}{\partial} % partial differential shortcut
\newcommand{\ket}[1]{\left| #1 \right>} % for Dirac kets
%\newcommand{\ket}[1]{| #1 \rangle}
\newcommand{\bra}[1]{\left< #1 \right|} % for Dirac bras
%\newcommand{\bra}[1]{\langle #1 |}
\newcommand{\braket}[2]{\left< #1 \vphantom{#2} \right| \left. #2 \vphantom{#1} \right>} 
	% for Dirac bra-kets \braket{bra}{ket}
%\newcommand{\braket}[2]{\langle #1 | #2 \rangle} 
\newcommand{\matrixel}[3]{\left< #1 \vphantom{#2#3} \right| #2 \left| #3 \vphantom{#1#2} \right>} 
	% for Dirac matrix elements \matrixel{bra}{op}{ket}
%\newcommand{\matrixel}[3]{\langle #1 | #2 | #3 \rangle} 

%\newcommand{\pd}[2]{\frac{\partial #1}{\partial #2}} % for partial derivatives
%\newcommand{\fd}[2]{\frac{\delta #1}{\delta #2}} % for functional derivatives
\let \vaccent = \v % rename builtin command \v{} to \vaccent{}
%\renewcommand{\v}[1]{\ensuremath{\mathbf{#1}}} % for vectors
\renewcommand{\v}[1]{\ensuremath{\boldsymbol{\mathbf{#1}}}} % for vectors
%\newcommand{\gv}[1]{\ensurmath{\mbox{\boldmath$ #1 $}}} % for vectors of Greek letters
\newcommand{\uv}[1]{\ensuremath{\boldsymbol{\mathbf{\widehat{#1}}}}} % for unit vectors
%\newcommand{\abs}[1]{\left| #1 \right|} % for absolute value ||x||
%\newcommand{\mag}{\abs} % magnitude, just another name for \abs
%\newcommand{\norm}[1]{\left\Vert #1 \right\Vert} % for norm ||v||
\newcommand{\vd}[1]{\v{\dot{#1}}} % for dotted vectors
\newcommand{\vdd}[1]{\v{\ddot{#1}}} % for ddotted vectors
\newcommand{\vddd}[1]{\v{\dddot{#1}}} % for dddotted vectors
\newcommand{\vdddd}[1]{\v{\ddddot{#1}}} % for ddddotted vectors
\newcommand{\avg}[1]{\left< #1 \right>} % for average <x>
\newcommand{\inner}[2]{\left< #1, #2 \right>} % for inner product <x,y>
%\newcommand{\set}[1]{ \left\{ #1 \right\} } % for sets {a,b,c,...}
\newcommand{\tr}{\opname{tr}} % for trace
\newcommand{\Tr}{\opname{Tr}} % for Trace
\newcommand{\rank}{\opname{rank}} % for rank
\let \fancyre = \Re
\let \fancyim = \Im
\newcommand{\Res}{\opname{Res}\limits} % for residue function -- change to put limits on bottom
\renewcommand{\Re}{\opname{Re}}
\renewcommand{\Im}{\opname{Im}}
\renewcommand{\bbar}[1]{\bar{\bar{#1}}} 
	% for barring things twice -- use \cbar or \zbar instead of original \bbar
\newcommand{\bbbar}[1]{\bar{\bbar{#1}}}
\newcommand{\bbbbar}[1]{\bar{\bbbar{#1}}}

\newcommand{\inv}{^{-1}}

% temporary fixes -- commath's versions are bad for powers, like $\dif^3 x$
\renewcommand{\dif}{\mathrm{d}} % \opname{d} better maybe?
\renewcommand{\Dif}{\mathrm{D}}

% notational shortcuts
\newcommand{\bigO}{\mathcal{O}} % big O notation
\let \bigo = \bigO % keep for now, need to update instances in older files
\newcommand{\Lag}{\mathcal{L}} % fancy Lagrangian
\newcommand{\Ham}{\mathcal{H}} % fancy Hamiltonian
\newcommand{\reals}{\mathbb{R}} % real numbers
\newcommand{\complexes}{\mathbb{C}} % complex numbers
\newcommand{\ints}{\mathbb{Z}} % integers
\newcommand{\nats}{\mathbb{N}} % natural numbers
\newcommand{\irrats}{\mathbb{Q}} % irrationals
\newcommand{\quats}{\mathbb{H}} % quaternions (a la Hamilton)
\newcommand{\euclids}{\mathbb{E}} % Euclidean space
\newcommand{\R}{\reals}
\newcommand{\C}{\complexes}
\newcommand{\Z}{\ints}
\newcommand{\Q}{\irrats}
\newcommand{\N}{\nats}
\newcommand{\E}{\euclids}
\newcommand{\RP}{\mathbb{RP}} % real projective space
\newcommand{\CP}{\mathbb{CP}} % complex projective space

% matrix shortcuts!
\newcommand{\pmat}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\bmat}[1]{\begin{bmatrix} #1 \end{bmatrix}}
\newcommand{\Bmat}[1]{\begin{Bmatrix} #1 \end{Bmatrix}}
\newcommand{\vmat}[1]{\begin{vmatrix} #1 \end{vmatrix}}
\newcommand{\Vmat}[1]{\begin{Vmatrix} #1 \end{Vmatrix}}


% more stuff
\newenvironment{enumproblem}{\begin{enumerate}[label=\textbf{(\alph*)}]}{\end{enumerate}}
	% for easily enumerating letters in problems
\newcommand{\grad}[1]{\v{\nabla} #1} % for gradient
\let \divsymb = \div % rename builtin command \div to \divsymb
\renewcommand{\div}[1]{\v{\nabla} \cdot #1} % for divergence
\newcommand{\curl}[1]{\v{\nabla} \times #1} % for curl
\let \baraccent = \= % rename builtin command \= to \baraccent
\renewcommand{\=}[1]{\stackrel{#1}{=}} % for putting numbers above =


% theorem-style environments. note amsthm builtin proof environment: \begin{proof}[title]
% appending [section] resets counter and prepends section number
% use \setcounter{counter}{0} to reset counter
% typical use cases:
% plain: Theorem, Lemma, Corollary, Proposition, Conjecture, Criterion, Algorithm
% definition: Definition, Condition, Problem, Example
% remark: Remark, Note, Notation, Claim, Summary, Acknowledgment, Case, Conclusion
\theoremstyle{plain} % default
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{conjecture}[theorem]{Conjecture}
% definition style
\theoremstyle{definition}
\newtheorem{definition}{Definition}
\newtheorem{problem}{Problem}
\newtheorem{exercise}{Exercise}
\newtheorem{example}{Example}
% remark style
\theoremstyle{remark}
\newtheorem{remark}{Remark}
\newtheorem{note}{Note}
\newtheorem{claim}{Claim}
\newtheorem{conclusion}{Conclusion}
% to-do: add problem/subproblem/answer environments for homeworks









%%%%% derivatives


\let \underdot = \d % rename builtin command \d{} to \underdot{}
\let \d = \od % for derivatives

% BUG: derivatives revert to text mode often when in smaller environments in math mode?


% Command for functional derivatives. The first argument denotes the function and the second argument denotes the variable with respect to which the derivative is taken. The optional argument denotes the order of differentiation. The style (text style/display style) is determined automatically
\providecommand{\fd}[3][]{\ensuremath{
\ifinner
\tfrac{\delta{^{#1}}#2}{\delta{#3^{#1}}}
\else
\dfrac{\delta{^{#1}}#2}{\delta{#3^{#1}}}
\fi
}}

% \tfd[2]{f}{k} denotes the second functional derivative of f with respect to k
% The first letter t means "text style"
\providecommand{\tfd}[3][]{\ensuremath{\mathinner{
\tfrac{\delta{^{#1}}#2}{\delta{#3^{#1}}}
}}}
% \dfd[2]{f}{k} denotes the second functional derivative of f with respect to k
% The first letter d means "display style"
\providecommand{\dfd}[3][]{\ensuremath{\mathinner{
\dfrac{\delta{^{#1}}#2}{\delta{#3^{#1}}}
}}}

% mixed functional derivative - analogous to the functional derivative command
% \mfd{F}{5}{x}{2}{y}{3}
\providecommand{\mfd}[6]{\ensuremath{
\ifinner
\tfrac{\delta{^{#2}}#1}{\delta{#3^{#4}}\delta{#5^{#6}}}
\else
\dfrac{\delta{^{#2}}#1}{\delta{#3^{#4}}\delta{#5^{#6}}}
\fi
}}


% Command for thermodynamic (chemistry?) partial derivatives. The first argument denotes the function and the second argument denotes the variable with respect to which the derivative is taken. The optional argument denotes the order of differentiation. The style (text style/display style) is determined automatically
\providecommand{\pdc}[4][]{\ensuremath{
\ifinner
\left( \tfrac{\partial{^{#1}}#2}{\partial{#3^{#1}}} \right)_{#4}
\else
\left( \dfrac{\partial{^{#1}}#2}{\partial{#3^{#1}}} \right)_{#4}
\fi
}}

% \tpd[2]{f}{k} denotes the second thermo partial derivative of f with respect to k
% The first letter t means "text style"
\providecommand{\tpdc}[4][]{\ensuremath{\mathinner{
\left( \tfrac{\partial{^{#1}}#2}{\partial{#3^{#1}}} \right)_{#4}
}}}
% \dpd[2]{f}{k} denotes the second thermo partial derivative of f with respect to k
% The first letter d means "display style"
\providecommand{\dpdc}[4][]{\ensuremath{\mathinner{
\left( \dfrac{\partial{^{#1}}#2}{\partial{#3^{#1}}} \right)_{#4}
}}}


%%%%%%





%%%%%%%%%%%%%%%%%%%
% some templates for various things
\begin{comment}

% template for figures
\begin{figure}
\centering
\includegraphics{myfile.png}
\caption{This is a caption}
\label{fig:myfigure}
\end{figure}

% template for Feynman diagrams using feynmf/feynmp
\begin{fmfgraph*}(40,25)
\fmfleft{em,ep}
\fmf{fermion}{em,Zee,ep}
\fmf{photon,label=$Z$}{Zee,Zff}
\fmf{fermion}{fb,Zff,f}
\fmfright{fb,f}
\fmfdot{Zee,Zff}
\end{fmfgraph*}

% template for drawing plots with pgfplot
\pgfplotsset{compat=1.3,compat/path replacement=1.5.1}
\begin{tikzpicture}
\begin{axis}[
extra x ticks={-2,2},
extra y ticks={-2,2},
extra tick style={grid=major}]
\addplot {x};
\draw (axis cs:0,0) circle[radius=2];
\end{axis}
\end{tikzpicture}

%% find package for easily drawing mapping / algebraic / commutative diagrams..

\end{comment}
%%%%%%%%%%%%%%%%%%%



%%%%% A note on spacing
% 5) \qquad
% 4) \quad
% 3) \thickspace = \;
% 2) \medspace = \:
% 1) \thinspace = \,
% -1) \negthinspace = \!
% -2) \negmedspace
% -3) \negthickspace


